<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Buddy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 20px;
            font-size: 16px;
            font-weight: 600;
            background: #000;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .battery {
            background: #34C759;
            color: #000;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 14px;
        }

        .app-header {
            padding: 20px;
            background: #000;
        }

        .app-title {
            font-size: 34px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .main-container {
            padding: 0 20px;
            min-height: calc(100vh - 160px);
        }

        .overview-card {
            background: #1C1C1E;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .overview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .overview-title {
            font-size: 24px;
            font-weight: bold;
        }

        .add-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .progress-bar {
            background: #2C2C2E;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #007AFF, #34C759);
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .overview-stats {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
        }

        .budget-item {
            background: #1C1C1E;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .budget-info h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .budget-info p {
            color: #8E8E93;
            font-size: 14px;
        }

        .budget-status {
            text-align: right;
        }

        .budget-percentage {
            font-size: 14px;
            color: #8E8E93;
            margin-bottom: 4px;
        }

        .budget-remaining {
            font-size: 16px;
            font-weight: 600;
        }

        .chart-container {
            background: #1C1C1E;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .chart {
            display: flex;
            justify-content: space-around;
            align-items: end;
            height: 200px;
            margin: 20px 0;
        }

        .chart-bar {
            background: #007AFF;
            border-radius: 4px 4px 0 0;
            min-width: 60px;
            display: flex;
            flex-direction: column;
            justify-content: end;
            align-items: center;
            position: relative;
        }

        .chart-label {
            margin-top: 10px;
            font-size: 14px;
            color: #8E8E93;
        }

        .chart-value {
            position: absolute;
            top: -25px;
            font-size: 12px;
            color: #fff;
            background: #000;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .tab-bar {
            display: flex;
            justify-content: space-around;
            background: #1C1C1E;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            border-top: 1px solid #2C2C2E;
        }

        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #8E8E93;
            font-size: 12px;
            cursor: pointer;
            padding: 5px;
        }

        .tab-item.active {
            color: #007AFF;
        }

        .tab-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #1C1C1E;
            border-radius: 16px;
            padding: 20px;
            margin: 20px;
            max-width: 400px;
            width: 100%;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
        }

        .close-btn {
            background: none;
            border: none;
            color: #8E8E93;
            font-size: 24px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: 600;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            background: #2C2C2E;
            border: 1px solid #3A3A3C;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
        }

        .amount-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .amount-btn {
            background: #2C2C2E;
            color: #fff;
            border: 1px solid #3A3A3C;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }

        .amount-btn:hover {
            background: #3A3A3C;
        }

        .form-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-primary {
            background: #34C759;
            color: #fff;
        }

        .btn-secondary {
            background: #2C2C2E;
            color: #fff;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #1C1C1E;
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .expense-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .expense-info p {
            color: #8E8E93;
            font-size: 14px;
        }

        .expense-amount {
            font-size: 18px;
            font-weight: 600;
        }

        .delete-btn {
            background: #FF3B30;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 12px;
            margin-left: 12px;
            cursor: pointer;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #1C1C1E;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-label {
            color: #8E8E93;
            font-size: 12px;
        }

        .green { color: #34C759; }
        .red { color: #FF3B30; }
        .blue { color: #007AFF; }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin: 20px 0 12px 0;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <div class="status-left">
            <span id="current-time">8:30</span>
            <span>üîá</span>
        </div>
        <div class="status-right">
            <span>‚óè‚óè‚óè 5G</span>
            <span class="battery">77%</span>
        </div>
    </div>

    <div class="app-header">
        <h1 class="app-title" id="page-title">Budget Buddy</h1>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="main-container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value blue" id="monthly-expenses">$0.00</div>
                <div class="stat-label">Monthly Expenses</div>
            </div>
            <div class="stat-card">
                <div class="stat-value green" id="net-income">$0.00</div>
                <div class="stat-label">Net (Income - Expenses)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="remaining-budget">$0.00</div>
                <div class="stat-label">Remaining Budget</div>
            </div>
        </div>

        <div class="chart-container">
            <h3>Monthly Overview</h3>
            <div class="chart">
                <div class="chart-bar" style="height: 80%;">
                    <div class="chart-value" id="income-chart">$0</div>
                    <div class="chart-label">Income</div>
                </div>
                <div class="chart-bar" style="height: 20%;">
                    <div class="chart-value" id="expenses-chart">$0</div>
                    <div class="chart-label">Expenses</div>
                </div>
                <div class="chart-bar" style="height: 60%;">
                    <div class="chart-value" id="net-chart">$0</div>
                    <div class="chart-label">Net</div>
                </div>
            </div>
        </div>

        <div class="section-title">Upcoming (next 14 days)</div>
        <div class="budget-item">
            <div class="budget-info">
                <p style="color: #8E8E93;">Nothing due in the next 14 days</p>
            </div>
        </div>

        <div class="section-title">Budgets</div>
        <div id="budgets-container">
            <!-- Budget items will be populated here -->
        </div>
    </div>

    <!-- Budgets View -->
    <div id="budgets-view" class="main-container hidden">
        <div class="overview-card">
            <div class="overview-header">
                <h2 class="overview-title">Monthly Budget Overview</h2>
                <button class="add-btn" onclick="openBudgetModal()">Add Budget</button>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="total-progress" style="width: 0%"></div>
            </div>
            <div class="overview-stats">
                <span><span id="total-used-percent">0%</span> used</span>
                <span>$<span id="total-remaining">0</span> remaining</span>
            </div>
        </div>

        <div id="budget-items-container">
            <!-- Budget items will be populated here -->
        </div>
    </div>

    <!-- Expenses View -->
    <div id="expenses-view" class="main-container hidden">
        <div class="overview-header">
            <h2 class="overview-title">Expenses</h2>
            <button class="add-btn" onclick="openExpenseModal()">Add</button>
        </div>

        <div id="expenses-container">
            <!-- Expense items will be populated here -->
        </div>
    </div>

    <!-- Income View -->
    <div id="income-view" class="main-container hidden">
        <div class="overview-header">
            <h2 class="overview-title">Income</h2>
            <button class="add-btn" onclick="openIncomeModal()">Add</button>
        </div>

        <div id="income-container">
            <!-- Income items will be populated here -->
        </div>
    </div>

    <!-- Budget Modal -->
    <div id="budget-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Budget</h3>
                <button class="close-btn" onclick="closeBudgetModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Category</label>
                <input type="text" id="budget-category" placeholder="e.g., Food, Rent">
            </div>
            <div class="form-group">
                <label>Budget Amount ($)</label>
                <input type="number" id="budget-amount" placeholder="0.00" step="0.01">
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeBudgetModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addBudget()">Save Budget</button>
            </div>
        </div>
    </div>

    <!-- Expense Modal -->
    <div id="expense-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Expense</h3>
                <button class="close-btn" onclick="closeExpenseModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Name</label>
                <input type="text" id="expense-name" placeholder="Description">
            </div>
            <div class="form-group">
                <label>Amount ($)</label>
                <input type="number" id="expense-amount" placeholder="0.00" step="0.01">
            </div>
            <div class="amount-buttons">
                <button class="amount-btn" onclick="setAmount('expense', 25)">$25</button>
                <button class="amount-btn" onclick="setAmount('expense', 50)">$50</button>
                <button class="amount-btn" onclick="setAmount('expense', 100)">$100</button>
                <button class="amount-btn" onclick="setAmount('expense', 250)">$250</button>
                <button class="amount-btn" onclick="setAmount('expense', 500)">$500</button>
            </div>
            <div class="form-group">
                <label>Category</label>
                <select id="expense-category">
                    <option value="Food">Food</option>
                    <option value="Gas">Gas</option>
                    <option value="Car">Car</option>
                    <option value="Subscriptions">Subscriptions</option>
                    <option value="Home Supplies">Home Supplies</option>
                    <option value="Snacks">Snacks</option>
                    <option value="Fines">Fines</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeExpenseModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addExpense()">Save Expense</button>
            </div>
        </div>
    </div>

    <!-- Income Modal -->
    <div id="income-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Income</h3>
                <button class="close-btn" onclick="closeIncomeModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Source</label>
                <input type="text" id="income-source" placeholder="e.g., Salary, Freelance">
            </div>
            <div class="form-group">
                <label>Amount ($)</label>
                <input type="number" id="income-amount" placeholder="0.00" step="0.01">
            </div>
            <div class="amount-buttons">
                <button class="amount-btn" onclick="setAmount('income', 500)">$500</button>
                <button class="amount-btn" onclick="setAmount('income', 1000)">$1000</button>
                <button class="amount-btn" onclick="setAmount('income', 2000)">$2000</button>
                <button class="amount-btn" onclick="setAmount('income', 3000)">$3000</button>
                <button class="amount-btn" onclick="setAmount('income', 5000)">$5000</button>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeIncomeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="addIncome()">Save Income</button>
            </div>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active" onclick="showView('dashboard')">
            <div class="tab-icon">üìä</div>
            <div>Dashboard</div>
        </div>
        <div class="tab-item" onclick="showView('budgets')">
            <div class="tab-icon">üí∞</div>
            <div>Budgets</div>
        </div>
        <div class="tab-item" onclick="showView('expenses')">
            <div class="tab-icon">üìù</div>
            <div>Expenses</div>
        </div>
        <div class="tab-item" onclick="showView('income')">
            <div class="tab-icon">üíµ</div>
            <div>Income</div>
        </div>
    </div>

    <script>
        // Data storage
        let budgets = JSON.parse(localStorage.getItem('budgets')) || {};
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        let income = JSON.parse(localStorage.getItem('income')) || [];

        // Initialize with sample data if empty
        if (Object.keys(budgets).length === 0) {
            budgets = {
                'Rent': { amount: 1700, spent: 0 },
                'Car Insurance': { amount: 315, spent: 315 },
                'Gas': { amount: 250, spent: 11.27 },
                'Debt': { amount: 850, spent: 0 },
                'Subscriptions': { amount: 300, spent: 36.96 },
                'Food': { amount: 800, spent: 410.83 },
                'Haircut': { amount: 200, spent: 50 }
            };
            saveBudgets();
        }

        // Initialize with sample expenses if empty
        if (expenses.length === 0) {
            expenses = [
                { name: 'Gas', amount: 15.02, category: 'Gas', date: new Date().toISOString() },
                { name: 'Walmart', amount: 13.91, category: 'Home Supplies', date: new Date().toISOString() },
                { name: '711', amount: 6.54, category: 'Snacks', date: new Date().toISOString() },
                { name: 'Tickets', amount: 550.00, category: 'Fines', date: new Date().toISOString() },
                { name: 'Amazon', amount: 71.30, category: 'Home Supplies', date: new Date().toISOString() },
                { name: 'Car Insurance', amount: 315.00, category: 'Car', date: new Date().toISOString() },
                { name: 'Netflix', amount: 36.96, category: 'Subscriptions', date: new Date().toISOString() }
            ];
            saveExpenses();
        }

        function saveData() {
            localStorage.setItem('budgets', JSON.stringify(budgets));
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('income', JSON.stringify(income));
        }

        function saveBudgets() {
            localStorage.setItem('budgets', JSON.stringify(budgets));
        }

        function saveExpenses() {
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        function saveIncome() {
            localStorage.setItem('income', JSON.stringify(income));
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('current-time').textContent = timeString;
        }

        function showView(viewName) {
            // Hide all views
            const views = ['dashboard-view', 'budgets-view', 'expenses-view', 'income-view'];
            views.forEach(view => {
                document.getElementById(view).classList.add('hidden');
            });

            // Show selected view
            document.getElementById(viewName + '-view').classList.remove('hidden');

            // Update active tab
            document.querySelectorAll('.tab-item').forEach(tab => tab.classList.remove('active'));
            event.target.closest('.tab-item').classList.add('active');

            // Update page title
            const titles = {
                'dashboard': 'Budget Buddy',
                'budgets': 'Budgets',
                'expenses': 'Expenses',
                'income': 'Income'
            };
            document.getElementById('page-title').textContent = titles[viewName];

            // Refresh data
            if (viewName === 'dashboard') renderDashboard();
            if (viewName === 'budgets') renderBudgets();
            if (viewName === 'expenses') renderExpenses();
            if (viewName === 'income') renderIncome();
        }

        function calculateTotals() {
            const totalIncome = income.reduce((sum, item) => sum + item.amount, 0);
            const totalExpenses = expenses.reduce((sum, item) => sum + item.amount, 0);
            const netIncome = totalIncome - totalExpenses;
            const totalBudget = Object.values(budgets).reduce((sum, budget) => sum + budget.amount, 0);
            const totalSpent = Object.values(budgets).reduce((sum, budget) => sum + budget.spent, 0);

            return {
                totalIncome,
                totalExpenses,
                netIncome,
                totalBudget,
                totalSpent,
                remainingBudget: totalBudget - totalSpent
            };
        }

        function renderDashboard() {
            const totals = calculateTotals();

            document.getElementById('monthly-expenses').textContent = `$${totals.totalExpenses.toFixed(2)}`;
            document.getElementById('net-income').textContent = `$${totals.netIncome.toFixed(2)}`;
            document.getElementById('remaining-budget').textContent = `$${totals.remainingBudget.toFixed(2)}`;

            document.getElementById('income-chart').textContent = `$${totals.totalIncome.toFixed(0)}`;
            document.getElementById('expenses-chart').textContent = `$${totals.totalExpenses.toFixed(0)}`;
            document.getElementById('net-chart').textContent = `$${totals.netIncome.toFixed(0)}`;

            // Update chart bar heights
            const maxValue = Math.max(totals.totalIncome, totals.totalExpenses, totals.netIncome, 1);
            const incomeHeight = (totals.totalIncome / maxValue) * 80 + 20;
            const expensesHeight = (totals.totalExpenses / maxValue) * 80 + 20;
            const netHeight = (Math.abs(totals.netIncome) / maxValue) * 80 + 20;

            document.querySelector('.chart .chart-bar:nth-child(1)').style.height = incomeHeight + '%';
            document.querySelector('.chart .chart-bar:nth-child(2)').style.height = expensesHeight + '%';
            document.querySelector('.chart .chart-bar:nth-child(3)').style.height = netHeight + '%';

            // Render budget summary
            const budgetsContainer = document.getElementById('budgets-container');
            budgetsContainer.innerHTML = '';

            Object.entries(budgets).slice(0, 3).forEach(([category, budget]) => {
                const percentage = budget.amount > 0 ? (budget.spent / budget.amount * 100).toFixed(1) : 0;
                const remaining = budget.amount - budget.spent;

                const budgetItem = document.createElement('div');
                budgetItem.className = 'budget-item';
                budgetItem.innerHTML = `
                    <div class="budget-info">
                        <h3>${category}</h3>
                        <p>$${budget.spent.toFixed(2)} of $${budget.amount.toFixed(2)}</p>
                    </div>
                    <div class="budget-status">
                        <div class="budget-percentage">${percentage}% used</div>
                        <div class="budget-remaining">$${remaining.toFixed(2)} left</div>
                    </div>
                `;
                budgetsContainer.appendChild(budgetItem);
            });
        }

        function renderBudgets() {
            const totals = calculateTotals();
            const usedPercentage = totals.totalBudget > 0 ? (totals.totalSpent / totals.totalBudget * 100).toFixed(1) : 0;

            document.getElementById('total-progress').style.width = Math.min(usedPercentage, 100) + '%';
            document.getElementById('total-used-percent').textContent = usedPercentage;
            document.getElementById('total-remaining').textContent = totals.remainingBudget.toFixed(2);

            const container = document.getElementById('budget-items-container');
            container.innerHTML = '';

            Object.entries(budgets).forEach(([category, budget]) => {
                const percentage = budget.amount > 0 ? (budget.spent / budget.amount * 100).toFixed(1) : 0;
                const remaining = budget.amount - budget.spent;

                const budgetItem = document.createElement('div');
                budgetItem.className = 'budget-item';
                budgetItem.innerHTML = `
                    <div class="budget-info">
                        <h3>${category}</h3>
                        <p>$${budget.spent.toFixed(2)} of $${budget.amount.toFixed(2)}</p>
                    </div>
                    <div class="budget-status">
                        <div class="budget-percentage">${percentage}% used</div>
                        <div class="budget-remaining">$${remaining.toFixed(2)} left</div>
                    </div>
                `;
                container.appendChild(budgetItem);
            });
        }

        function renderExpenses() {
            const container = document.getElementById('expenses-container');
            container.innerHTML = '';

            expenses.forEach((expense, index) => {
                const expenseItem = document.createElement('div');
                expenseItem.className = 'expense-item';
                expenseItem.innerHTML = `
                    <div class="expense-info">
                        <h4>${expense.name}</h4>
                        <p>${expense.category} ‚Ä¢ one-off</p>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="expense-amount">$${expense.amount.toFixed(2)}</div>
                        <button class="delete-btn" onclick="deleteExpense(${index})">√ó</button>
                    </div>
                `;
                container.appendChild(expenseItem);
            });
        }

        function renderIncome() {
            const container = document.getElementById('income-container');
            container.innerHTML = '';

            income.forEach((incomeItem, index) => {
                const item = document.createElement('div');
                item.className = 'expense-item';
                item.innerHTML = `
                    <div class="expense-info">
                        <h4>${incomeItem.source}</h4>
                        <p>Income ‚Ä¢ monthly</p>
                    </div>
